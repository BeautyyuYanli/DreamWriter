# Dream Writer

LLM-powered writer who can help you write your dreams.

<details>
    <summary>Example: ...后来玫瑰泛滥成灾...</summary>
在这个宁静祥和的小镇上，每家每户的院子里都种植着玫瑰花。芬芳的花香烘托了这里宁静祥和的氛围，让人仿佛置身于花的海洋。清新的空气中弥漫着玫瑰花特有的香气，让人心旷神怡。

小镇上的人们都很热爱玫瑰花，他们精心呵护着自家的玫瑰园，将玫瑰花种得五颜六色、争奇斗艳。玫瑰花开的时候，整个小镇都沉浸在花的海洋中，美不胜收。

玫瑰花不仅是小镇上人们的美丽风景，也是他们谋生的手段。小镇上的人们将玫瑰花制成各种各样的产品，比如玫瑰花茶、玫瑰花精油、玫瑰花护肤品等，深受市场的欢迎。

然而，由于小镇上的人们缺乏专业的园艺知识，他们的玫瑰花田经常遭受病虫害的侵袭。玫瑰花产量下降，农民们的收入也减少了。

就在小镇上的人们为玫瑰花的问题一筹莫展的时候，一位来自大城市的园艺师露西来到了小镇。露西是一位经验丰富的园艺师，她对玫瑰花有着深厚的感情。她来到小镇上，帮助当地人照顾他们的玫瑰园。

露西是一位来自大城市的园艺师，她从小就对园艺有着浓厚的兴趣，尤其喜爱各种各样的玫瑰花。大学毕业后，她放弃了在大城市高薪的工作，选择来到这个宁静祥和的小镇上，帮助当地人照顾他们的玫瑰园。

露西的到来给小镇带来了新的气息。她有着丰富的园艺知识和经验，很快就帮助当地人解决了玫瑰花田遭受病虫害侵袭的问题。她还带来了许多新的玫瑰花品种，并教当地人如何培育和修剪玫瑰花，让小镇上的玫瑰花长得更加美丽和健康。

在露西的努力下，小镇上的玫瑰花繁荣发展，吸引着来自远方的游客和园艺爱好者。他们慕名前来，欣赏小镇的玫瑰花田，学习露西的园艺技术。小镇因此而变得更加热闹和繁荣，当地人的收入也增加了。

露西对小镇的玫瑰花田倾注了全部的心血，她每天一大早就起来在玫瑰花田里辛勤劳作。她观察每株玫瑰花的状态，及时为它们提供所需的养分和水分。她还定期修剪玫瑰花的枝条，让它们长得更加整齐美观。

在露西的热情和创造力下，玫瑰花在小镇上繁荣发展，成为小镇的骄傲。小镇的街道两旁都种满了玫瑰花，花开季节，花团锦簇，芳香四溢，吸引了来自远方的游客和园艺爱好者。

露西不仅带来了丰富的园艺知识和经验，还带来了一些新品种的玫瑰花，让小镇的玫瑰花更加丰富多彩。露西还举办了玫瑰画展，吸引了更多的游客和园艺爱好者前来参观学习。

随着玫瑰花的盛开，小镇的经济也得到了发展。游客的到来给小镇带来了收入，促进了当地的经济发展。小镇的居民也开始种植玫瑰花，并将其出售给游客，增加了收入。

随着时间的推移，玫瑰花开始泛滥成灾，它们疯狂地生长，覆盖了小镇的每一条街道和建筑物。在小镇的每一个角落，都能看到盛开的玫瑰花，它们争奇斗艳，绽放着美丽的花朵。然而，这种盛景却给小镇带来了窒息的感觉。

玫瑰花的香气过于浓郁，让人喘不过气来。仿佛置身于一个巨大的花海中，被玫瑰的芬芳所包围。这种香气起初令人陶醉，但久而久之，却让人感到头晕目眩，甚至恶心。

由于玫瑰花泛滥成灾，道路和排水系统变得拥堵不堪。花瓣和花刺堵塞了排水口，导致污水无法正常排出。每逢下雨天，小镇就变成了一片汪洋，严重影响了居民的出行和生活。

玫瑰花泛滥成灾也摧毁了当地的经济。由于道路堵塞，游客无法进入小镇，导致旅游业遭受重创。而当地居民种植的农作物也被玫瑰花所覆盖，导致农作物减产，农民收入锐减。

当繁盛的玫瑰花海蔓延吞噬了整个小镇，露西陷入深深的懊悔和内疚之中。她意识到自己一手造成了这不可挽回的灾难。美艳的花朵失去了往日的欣赏价值，反而变成了梦魇般的存在。曾经由芬芳的花香烘托的祥和平静氛围被恐惧和绝望所取代。

小镇居民将怒火对准了露西，认为是她带来了这无穷无尽的玫瑰灾难。他们原本安逸的生活被毁于一旦，生计也受到了严重影响。露西遭受着居民们的指责和谩骂，昔日的尊敬和爱戴荡然无存。她每天都活在自责和绝望之中，不知如何才能弥补自己犯下的过错。

露西意识到自己必须做出些什么来挽回局面，她决心找到一种方法将玫瑰花转化为有价值的资源，以减轻小镇居民的负担。她日以继夜地进行实验，不放过任何一个可能的方案。

露西回到自己的小屋，关上门，在黑暗中摸索着走向写字台。她拉开抽屉，从里面拿出一个精致的小瓶子，里面装着她从玫瑰花中提取的精油。

她轻轻地打开了瓶盖，一股浓郁的玫瑰花香扑鼻而来。她闭上眼睛，深深地吸了一口气，仿佛要把这香气吸进灵魂深处。

露西知道，这种精油是她拯救小镇的唯一希望。她开始着手制作香水，她把精油与水、酒精和香料混合在一起，经过反复试验，终于调配出了完美的香水。

她把香水装进小瓶子里，然后给它取了一个名字，叫做“玫瑰之梦”。她相信，这款香水一定会受到人们的喜爱。

露西把“玫瑰之梦”香水拿到了镇上的集市上，开始销售。起初，人们对这款香水并不感兴趣，他们认为这只是露西的又一个愚蠢的把戏。

但是，当他们闻到了“玫瑰之梦”的香气之后，他们都被深深地吸引住了。这种香气是如此的迷人，如此的独特，让人难以忘怀。

人们开始争相购买“玫瑰之梦”香水，露西的生意很快就红火了起来。小镇上的玫瑰花也开始变得值钱起来，农民们终于看到了希望。

由于露西的努力和创造力，小镇从玫瑰花泛滥的深渊中慢慢恢复了生机。玫瑰花成为了小镇新的经济支柱，吸引了无数游客和园艺爱好者前来观光，带动了小镇的经济发展。小镇居民也逐渐意识到玫瑰花带来的不仅仅是灾难，还有无限的商机，也开始跟着露西学习如何种植和培育玫瑰，并将玫瑰花加工制作成各种各样的产品，如玫瑰花酱、玫瑰花茶、玫瑰花精油等，这些产品不仅在当地广受欢迎，还远销海外，让小镇的经济更上一层楼。

小镇居民重新爱上了玫瑰花，它不再是负担，而是他们的骄傲。曾经被玫瑰花摧毁的建筑物经过修缮后，又重新焕发了光彩，小镇也变得更加美丽和整洁。小镇的街道两旁种植着各种各样的玫瑰花，五颜六色的玫瑰花竞相开放，让人目不暇接。玫瑰花的香气弥漫在小镇的每个角落，让人心旷神怡。

露西的创造力拯救了小镇，使玫瑰花重新焕发了生机，她被誉为“玫瑰女王”。小镇居民们从一开始的愤怒和厌恶，变成了对她的感激和赞扬。露西也被邀请参加各种园艺展览和研讨会，分享她的经验和知识。她成了一个著名的园艺师，她的故事也激励了很多人。

小镇的玫瑰花，从一开始的灾难，到后来的经济支柱，再到如今的旅游景点，经历了一个曲折的过程。但最终，它们还是给小镇带来了繁荣和美丽。

</details>

## Deploy

Install the package:

```
pip install .
```

If you want to self-host the embedding service, you should install the package with the `emb_server` extra:

```
pip install ".[emb_server]"
```

Now you can start the self-host embedding service:

```
python src/dream_writer/emb_server.py
```

Then import the environment variable:

```
export EMBEDDING_SERVICE_BASE="http://localhost:8000"
export EMBEDDING_SERVICE_MODEL="intfloat/multilingual-e5-large"
export GOOGLE_API_KEY="your-google-api-key"
```

<details>
    <summary>Without self-host embedding service...</summary>
Without self-host embedding service, the code will use OpenAI embedding API. No need to set the `EMBEDDING_SERVICE_BASE` and `EMBEDDING_SERVICE_MODEL` environment variables, but:

```
export OPENAI_API_KEY="your-openai-api-key"
```

</details>

Finally, run the app:

```
streamlit run src/dream_writer/webui/main.py
```
